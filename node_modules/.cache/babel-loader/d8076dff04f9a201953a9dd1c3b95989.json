{"ast":null,"code":"import _regeneratorRuntime from\"D:/React.JS Tuts/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"D:/React.JS Tuts/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"D:/React.JS Tuts/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"D:/React.JS Tuts/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"D:/React.JS Tuts/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"D:/React.JS Tuts/newsapp/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from\"react\";import Newitem from\"./newitem\";import Masonry from\"react-masonry-css\";import Spinner from\"./Spinner\";import InfiniteScroll from\"react-infinite-scroll-component\";import ScrollToTop from\"react-scroll-to-top\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export var news=/*#__PURE__*/function(_Component){_inherits(news,_Component);var _super=_createSuper(news);function news(){var _this;_classCallCheck(this,news);_this=_super.call(this);_this.fetchMoreData=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:url=\"https://newsapi.org/v2/top-headlines?country=\".concat(_this.props.country,\"&\").concat(_this.props.type,\"=\").concat(_this.props.category,\"&sortBy=publishedAt&apiKey=0863bc22ea5f41a9b2977165a9176f7d&page=\").concat(_this.state.page,\"&pageSize=\").concat(_this.props.pageSize);_this.setState({loading:true});_context.next=4;return fetch(url);case 4:data=_context.sent;_context.next=7;return data.json();case 7:parsedData=_context.sent;_this.setState({news:_this.state.news.concat(parsedData.articles),page:_this.state.page+1,totalResults:parsedData.totalResults,loading:false});case 9:case\"end\":return _context.stop();}}},_callee);}));_this.state={news:[],loading:false,page:1,totalResults:0};return _this;}_createClass(news,[{key:\"updateNews\",value:function(){var _updateNews=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var url,data,parsedData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:this.props.setProgress(30);url=\"https://newsapi.org/v2/top-headlines?country=\".concat(this.props.country,\"&\").concat(this.props.type,\"=\").concat(this.props.category,\"&sortBy=publishedAt&apiKey=0863bc22ea5f41a9b2977165a9176f7d&page=\").concat(this.state.page,\"&pageSize=\").concat(this.props.pageSize);this.props.setProgress(70);this.setState({loading:true});_context2.next=6;return fetch(url);case 6:data=_context2.sent;_context2.next=9;return data.json();case 9:parsedData=_context2.sent;this.props.setProgress(85);this.setState({news:parsedData.articles,page:this.state.page+1,totalResults:parsedData.totalResults,loading:false});document.title=\"DiemFlash - \"+this.props.category.charAt(0).toUpperCase()+this.props.category.slice(1);this.props.setProgress(100);case 14:case\"end\":return _context2.stop();}}},_callee2,this);}));function updateNews(){return _updateNews.apply(this,arguments);}return updateNews;}()},{key:\"componentDidMount\",value:function(){var _componentDidMount=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:this.updateNews();case 1:case\"end\":return _context3.stop();}}},_callee3,this);}));function componentDidMount(){return _componentDidMount.apply(this,arguments);}return componentDidMount;}()},{key:\"render\",value:function render(){var breakpointColumnsObj={default:4,1100:3,700:2,500:1};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"h1\",{className:\"my-3\",children:[/*#__PURE__*/_jsx(\"u\",{children:\"Top-Headlines\"}),\" -\",\" \",this.props.category.charAt(0).toUpperCase()+this.props.category.slice(1)]})}),/*#__PURE__*/_jsx(InfiniteScroll,{dataLength:this.state.news.length,next:this.fetchMoreData,hasMore:this.state.news.length!==this.state.totalResults,loader:/*#__PURE__*/_jsx(Spinner,{}),children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(Masonry,{breakpointCols:breakpointColumnsObj,className:\"my-masonry-grid row\",columnClassName:\"my-masonry-grid_column\",children:this.state.news.map(function(element){return/*#__PURE__*/_jsx(Newitem,{title:element.title!=null?element.title.length>100?element.title.slice(0,100)+\"...\":element.title:\"\"// description={ \n,url:element.url,urlImage:element.urlToImage,idName:element.source.name,time:element.publishedAt.slice(0,10)+\" \"+element.publishedAt.slice(11,18),author:element.author?element.author.slice(0,15)?element.author.slice(0,15):element.author:\"Unknown\"},element.url);})})})}),/*#__PURE__*/_jsx(ScrollToTop,{smooth:true})]});}}]);return news;}(Component);news.defaultProps={country:\"in\",pageSize:12,category:\"technology\",type:\"category\"};export default news;","map":{"version":3,"sources":["D:/React.JS Tuts/newsapp/src/components/news.js"],"names":["React","Component","Newitem","Masonry","Spinner","InfiniteScroll","ScrollToTop","news","fetchMoreData","url","props","country","type","category","state","page","pageSize","setState","loading","fetch","data","json","parsedData","concat","articles","totalResults","setProgress","document","title","charAt","toUpperCase","slice","updateNews","breakpointColumnsObj","default","length","map","element","urlToImage","source","name","publishedAt","author","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\r\nimport Newitem from \"./newitem\";\r\nimport Masonry from \"react-masonry-css\";\r\nimport Spinner from \"./Spinner\";\r\nimport PropTypes from \"prop-types\";\r\nimport InfiniteScroll from \"react-infinite-scroll-component\";\r\nimport ScrollToTop from \"react-scroll-to-top\";\r\n\r\nexport class news extends Component {\r\n  \r\n  static defaultProps = {\r\n    country: \"in\",\r\n    pageSize: 12,\r\n    category: \"technology\",\r\n    type : \"category\"\r\n  };\r\n\r\n  static propTypes = {\r\n    country: PropTypes.string,\r\n    pageSize: PropTypes.number,\r\n    category: PropTypes.string,\r\n    type: PropTypes.string\r\n  };\r\n\r\n  constructor() {\r\n    super();\r\n\r\n    this.state = {\r\n      news: [],\r\n      loading: false,\r\n      page: 1,\r\n      totalResults: 0,\r\n    };\r\n  }\r\n\r\n  async updateNews() {\r\n    this.props.setProgress(30);\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&${this.props.type}=${this.props.category}&sortBy=publishedAt&apiKey=0863bc22ea5f41a9b2977165a9176f7d&page=${this.state.page}&pageSize=${this.props.pageSize}`;\r\n    this.props.setProgress(70);\r\n    this.setState({ loading: true });\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    this.props.setProgress(85);\r\n    this.setState({\r\n      news: parsedData.articles,\r\n      page: this.state.page + 1,\r\n      totalResults: parsedData.totalResults,\r\n      loading: false,\r\n    });\r\n    document.title =\r\n      \"DiemFlash - \" +\r\n      this.props.category.charAt(0).toUpperCase() +\r\n      this.props.category.slice(1);\r\n    this.props.setProgress(100);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    this.updateNews();\r\n  }\r\n\r\n  fetchMoreData = async () => {\r\n    let url = `https://newsapi.org/v2/top-headlines?country=${this.props.country}&${this.props.type}=${this.props.category}&sortBy=publishedAt&apiKey=0863bc22ea5f41a9b2977165a9176f7d&page=${this.state.page}&pageSize=${this.props.pageSize}`;\r\n    this.setState({ loading: true });\r\n    let data = await fetch(url);\r\n    let parsedData = await data.json();\r\n    this.setState({\r\n      news: this.state.news.concat(parsedData.articles),\r\n      page: this.state.page + 1,\r\n      totalResults: parsedData.totalResults,\r\n      loading: false,\r\n    });\r\n  };\r\n  render() {\r\n    const breakpointColumnsObj = {\r\n      default: 4,\r\n      1100: 3,\r\n      700: 2,\r\n      500: 1,\r\n    };\r\n\r\n    return (\r\n      <>\r\n        <div className=\"container\">\r\n          <h1 className=\"my-3\">\r\n            {/* <strong style={{ color: \"green\" }}>DiemFlash </strong> */}\r\n            <u>Top-Headlines</u> -{\" \"}\r\n            {this.props.category.charAt(0).toUpperCase() +\r\n              this.props.category.slice(1)}\r\n          </h1>\r\n        </div>\r\n        <InfiniteScroll\r\n          dataLength={this.state.news.length}\r\n          next={this.fetchMoreData}\r\n          hasMore={this.state.news.length !== this.state.totalResults}\r\n          loader={<Spinner />}\r\n        >\r\n          <div className=\"container\">\r\n            <Masonry\r\n              breakpointCols={breakpointColumnsObj}\r\n              className=\"my-masonry-grid row\"\r\n              columnClassName=\"my-masonry-grid_column\"\r\n            >\r\n              {this.state.news.map((element) => {\r\n                return (\r\n                  <Newitem key={element.url}\r\n                    title={\r\n                      element.title != null ? element.title.length > 100 ? element.title.slice(0, 100) + \"...\": element.title: \"\"\r\n                    }\r\n                    // description={ \r\n                    url={element.url}\r\n                    urlImage={element.urlToImage}\r\n                    idName={element.source.name}\r\n                    time={\r\n                      element.publishedAt.slice(0, 10) +\r\n                      \" \" +\r\n                      element.publishedAt.slice(11, 18)\r\n                    }\r\n                    author={\r\n                      element.author\r\n                        ? element.author.slice(0, 15)\r\n                          ? element.author.slice(0, 15)\r\n                          : element.author\r\n                        : \"Unknown\"\r\n                    }\r\n                  />\r\n                );\r\n              })}\r\n            </Masonry>\r\n          </div>\r\n        </InfiniteScroll>\r\n        <ScrollToTop smooth />\r\n      </>\r\n    );\r\n  }\r\n}\r\n\r\nexport default news;\r\n"]},"metadata":{},"sourceType":"module"}